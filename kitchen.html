<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kitchen Order Board</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{font-family:'Segoe UI',sans-serif;background:#1e1e1e;color:#fff;padding:20px}
.section{background:#2a2a2a;padding:16px;margin:16px auto;max-width:900px;border-radius:14px}
.order{background:#333;border-radius:12px;padding:14px;margin-bottom:12px}
button{padding:6px 10px;border-radius:8px;border:none;cursor:pointer}
.wait{background:#7f8c8d}
.progress{background:#e67e22}
.complete{background:#27ae60}
</style>
</head>

<body>

<h1 style="text-align:center">üç≥ Kitchen Orders</h1>

<div class="section">
<h2>Active</h2>
<div id="active"></div>
</div>

<div class="section">
<h2>Completed</h2>
<div id="done"></div>
</div>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyCMe7NS2qyLydIRuCb8jPSZLtL0h40afuo",
  authDomain: "family-order-4e07a.firebaseapp.com",
  databaseURL: "https://family-order-4e07a-default-rtdb.firebaseio.com",
  projectId: "family-order-4e07a",
  storageBucket: "family-order-4e07a.firebasestorage.app",
  messagingSenderId: "458217288852",
  appId: "1:458217288852:web:a5a96c700c294fd299b081"
});

const db = firebase.database().ref("family-order");

db.on("value", snap=>{
  const d = snap.val();
  if(!d) return;
  active.innerHTML = done.innerHTML = "";

  Object.entries(d.people||{}).forEach(([id,p])=>{
    const card = document.createElement("div");
    card.className = "order";
    card.innerHTML = `
      <strong>${p.name}</strong><br>
      ${(Object.keys(p.items||{})).length ? "Items selected" : "No items"}
      <br><br>
      <button class="wait" onclick="setStatus('${id}','waiting')">Waiting</button>
      <button class="progress" onclick="setStatus('${id}','progress')">Cooking</button>
      <button class="complete" onclick="setStatus('${id}','complete')">Done</button>
    `;
    (p.status==="complete"?done:active).appendChild(card);
  });
});

function setStatus(id,s){
  db.child("people").child(id).child("status").set(s);
}
</script>

</body>
</html>
